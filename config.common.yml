# 公共配置文件 - 所有环境共享的配置
# 环境特定配置（如 config.development.yml）会覆盖这里的配置

# 应用配置
app:
  name: Nest---App         # 应用名称

# API 配置
api:
  prefix: api           # API 前缀
  version: 1           # API 版本

# CORS 配置
cors:
  enabled: true         # 是否启用 CORS
  methods: GET,HEAD,PUT,PATCH,POST,DELETE  # 允许的方法
  headers: '*'          # 允许的请求头
  credentials: true     # 是否允许携带凭证
  maxAge: 3600         # 预检请求缓存时间（秒）

# 压缩配置
compression:
  threshold: 1024       # 压缩阈值（字节）
  quality: 4            # Brotli 压缩质量（0-11）

# 定时任务配置
schedule:
  enabled: true         # 是否启用定时任务
  cleanup:              # 日志清理任务
    cron: '0 0 * * *'   # 执行时间（每天凌晨）
    retention: 30       # 日志保留天数
  health:               # 健康检查任务
    cron: '0 * * * *'   # 执行时间（每小时）

# 数据库配置
database:
  type: mysql            # 数据库类型
  port: 3306            # 数据库端口
  migrations: src/database/migrations  # 迁移文件路径
  # 连接池配置
  pool:
    connectionLimit: 10           # 最大连接数（根据应用负载调整）
    queueLimit: 0                 # 队列限制（0 表示无限制）
    waitForConnections: true      # 连接池满时是否等待
    connectionTimeoutMillis: 2000 # 连接超时时间（毫秒）
    acquireTimeout: 30000         # 获取连接超时时间（毫秒）
    idleTimeoutMillis: 60000      # 空闲连接超时时间（毫秒）
    maxQueryExecutionTime: 60000  # 最大查询执行时间（毫秒）

# JWT 配置
jwt:
  expires: 7d           # 过期时间

# Swagger 配置
swagger:
  enabled: true         # 是否启用 Swagger
  title: NestJS API     # API 标题
  description: API Documentation  # API 描述
  version: '1.0'        # API 版本
  path: docs            # Swagger 访问路径
